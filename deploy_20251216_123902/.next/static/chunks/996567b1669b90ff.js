(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,r,s)=>{r.exports=e.r(76562)},63371,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(18566),a=e.i(11795);function l(){let[e,l]=(0,s.useState)(""),[n,o]=(0,s.useState)(""),[d,i]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),[p,m]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),g=(0,t.useRouter)(),f=(0,t.useSearchParams)(),b=(0,a.createClient)();(0,s.useEffect)(()=>{(async()=>{let{data:{session:e}}=await b.auth.getSession();e||u("Invalid or expired reset link. Please request a new password reset."),h(!0)})()},[b.auth]);let w=async r=>{if(r.preventDefault(),u(null),e!==n)return void u("Passwords do not match");if(e.length<8)return void u("Password must be at least 8 characters long");i(!0);try{let{error:r}=await b.auth.updateUser({password:e});r?u(r.message):(m(!0),setTimeout(()=>{let e=f.get("type")||"customer";g.push(`/login?type=${e}`)},2e3))}catch(e){u("An unexpected error occurred")}finally{i(!1)}};return x?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50 px-4 py-12 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-center text-3xl font-bold tracking-tight bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Lyra Enterprises"}),(0,r.jsx)("h3",{className:"mt-6 text-center text-2xl font-bold text-gray-900",children:"Reset Your Password"}),(0,r.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your new password below"})]}),p?(0,r.jsx)("div",{className:"rounded-xl bg-green-50 p-4",children:(0,r.jsx)("p",{className:"text-center text-green-800",children:"✅ Password updated successfully! Redirecting to login..."})}):(0,r.jsx)("form",{className:"mt-8 space-y-6",onSubmit:w,children:(0,r.jsxs)("div",{className:"space-y-4 rounded-xl bg-white px-8 py-10 shadow-lg",children:[c&&(0,r.jsxs)("div",{className:"rounded-lg bg-red-50 p-4",children:[(0,r.jsx)("p",{className:"text-sm text-red-800 mb-3",children:c}),(0,r.jsx)("a",{href:"/forgot-password",className:"inline-block text-sm font-medium text-blue-600 hover:text-blue-800 hover:underline",children:"Request a new password reset link →"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,r.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:e,onChange:e=>l(e.target.value),className:"mt-1 block w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter new password",minLength:8})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,r.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:n,onChange:e=>o(e.target.value),className:"mt-1 block w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 placeholder-gray-400 focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Confirm new password",minLength:8})]}),(0,r.jsx)("button",{type:"submit",disabled:d,className:"w-full rounded-full bg-gradient-to-r from-blue-600 to-purple-600 px-4 py-3 text-sm font-semibold text-white shadow-sm hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:d?"Updating...":"Update Password"})]})})]})}):(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-purple-600 border-r-transparent"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Verifying reset link..."})]})})}function n(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}),children:(0,r.jsx)(l,{})})}e.s(["default",()=>n])}]);