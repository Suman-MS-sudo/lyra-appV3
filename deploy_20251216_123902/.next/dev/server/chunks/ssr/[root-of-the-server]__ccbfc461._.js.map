{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///E:/lyra-app-v3/src/components/NewUserForm.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { ArrowLeft } from 'lucide-react';\r\n\r\ninterface Organization {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\ninterface NewUserFormProps {\r\n  organizations: Organization[];\r\n}\r\n\r\nexport default function NewUserForm({ organizations }: NewUserFormProps) {\r\n  const router = useRouter();\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  \r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    full_name: '',\r\n    phone: '',\r\n    account_type: 'customer',\r\n    role: 'customer',\r\n    organization_id: ''\r\n  });\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await fetch('/api/users', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          ...formData,\r\n          organization_id: formData.organization_id || null\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        throw new Error(data.message || 'Failed to create user');\r\n      }\r\n\r\n      router.push('/admin/users');\r\n      router.refresh();\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <header className=\"bg-white border-b\">\r\n        <div className=\"px-6 py-4\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <Link href=\"/admin/users\" className=\"p-2 hover:bg-gray-100 rounded-lg\">\r\n              <ArrowLeft className=\"h-5 w-5\" />\r\n            </Link>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Add New User</h1>\r\n              <p className=\"text-sm text-gray-500\">Create a new user account</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"container mx-auto px-6 py-8 max-w-3xl\">\r\n        <form onSubmit={handleSubmit} className=\"bg-white rounded-xl shadow-sm p-6 space-y-6\">\r\n          {error && (\r\n            <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg\">\r\n            <p className=\"text-sm\">A password reset email will be automatically sent to the user after account creation.</p>\r\n          </div>\r\n\r\n          <div className=\"grid md:grid-cols-2 gap-6\">\r\n            {/* Email */}\r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Email <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                name=\"email\"\r\n                required\r\n                value={formData.email}\r\n                onChange={handleChange}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"user@example.com\"\r\n              />\r\n            </div>\r\n\r\n            {/* Full Name */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Full Name\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                name=\"full_name\"\r\n                value={formData.full_name}\r\n                onChange={handleChange}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"Enter full name\"\r\n              />\r\n            </div>\r\n\r\n            {/* Phone */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Phone\r\n              </label>\r\n              <input\r\n                type=\"tel\"\r\n                name=\"phone\"\r\n                value={formData.phone}\r\n                onChange={handleChange}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                placeholder=\"+91 1234567890\"\r\n              />\r\n            </div>\r\n\r\n            {/* Account Type */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Account Type <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <select\r\n                name=\"account_type\"\r\n                value={formData.account_type}\r\n                onChange={handleChange}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"customer\">Customer</option>\r\n                <option value=\"super_customer\">Super Customer</option>\r\n                <option value=\"admin\">Admin</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Role */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Role <span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <select\r\n                name=\"role\"\r\n                value={formData.role}\r\n                onChange={handleChange}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"customer\">Customer</option>\r\n                <option value=\"super_customer\">Super Customer</option>\r\n                <option value=\"admin\">Admin</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Organization */}\r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Organization\r\n              </label>\r\n              <select\r\n                name=\"organization_id\"\r\n                value={formData.organization_id}\r\n                onChange={handleChange}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"\">No Organization</option>\r\n                {organizations.map(org => (\r\n                  <option key={org.id} value={org.id}>\r\n                    {org.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              <p className=\"text-xs text-gray-500 mt-1\">\r\n                Only applicable for super customers\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Submit Button */}\r\n          <div className=\"flex gap-3 pt-4\">\r\n            <Link\r\n              href=\"/admin/users\"\r\n              className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n            >\r\n              Cancel\r\n            </Link>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"flex-1 px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50\"\r\n            >\r\n              {loading ? 'Creating...' : 'Create User'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}