{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///E:/lyra-app-v3/src/components/GenerateMonthlyInvoicesButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const GenerateMonthlyInvoicesButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call GenerateMonthlyInvoicesButton() from the server but GenerateMonthlyInvoicesButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/GenerateMonthlyInvoicesButton.tsx <module evaluation>\",\n    \"GenerateMonthlyInvoicesButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,gCAAgC,IAAA,wQAAuB,EAChE;IAAa,MAAM,IAAI,MAAM;AAA0Q,GACvS,kFACA","ignoreList":[0]}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///E:/lyra-app-v3/src/components/GenerateMonthlyInvoicesButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const GenerateMonthlyInvoicesButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call GenerateMonthlyInvoicesButton() from the server but GenerateMonthlyInvoicesButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/GenerateMonthlyInvoicesButton.tsx\",\n    \"GenerateMonthlyInvoicesButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,gCAAgC,IAAA,wQAAuB,EAChE;IAAa,MAAM,IAAI,MAAM;AAA0Q,GACvS,8DACA","ignoreList":[0]}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///E:/lyra-app-v3/src/components/SendInvoiceEmailButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SendInvoiceEmailButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call SendInvoiceEmailButton() from the server but SendInvoiceEmailButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/SendInvoiceEmailButton.tsx <module evaluation>\",\n    \"SendInvoiceEmailButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,yBAAyB,IAAA,wQAAuB,EACzD;IAAa,MAAM,IAAI,MAAM;AAA4P,GACzR,2EACA","ignoreList":[0]}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///E:/lyra-app-v3/src/components/SendInvoiceEmailButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SendInvoiceEmailButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call SendInvoiceEmailButton() from the server but SendInvoiceEmailButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/SendInvoiceEmailButton.tsx\",\n    \"SendInvoiceEmailButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,yBAAyB,IAAA,wQAAuB,EACzD;IAAa,MAAM,IAAI,MAAM;AAA4P,GACzR,uDACA","ignoreList":[0]}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///E:/lyra-app-v3/src/components/RecordPaymentButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RecordPaymentButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call RecordPaymentButton() from the server but RecordPaymentButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/RecordPaymentButton.tsx <module evaluation>\",\n    \"RecordPaymentButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,wEACA","ignoreList":[0]}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///E:/lyra-app-v3/src/components/RecordPaymentButton.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const RecordPaymentButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call RecordPaymentButton() from the server but RecordPaymentButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/RecordPaymentButton.tsx\",\n    \"RecordPaymentButton\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,oDACA","ignoreList":[0]}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///E:/lyra-app-v3/src/components/PaymentSuccessBanner.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PaymentSuccessBanner = registerClientReference(\n    function() { throw new Error(\"Attempted to call PaymentSuccessBanner() from the server but PaymentSuccessBanner is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/PaymentSuccessBanner.tsx <module evaluation>\",\n    \"PaymentSuccessBanner\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,uBAAuB,IAAA,wQAAuB,EACvD;IAAa,MAAM,IAAI,MAAM;AAAwP,GACrR,yEACA","ignoreList":[0]}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///E:/lyra-app-v3/src/components/PaymentSuccessBanner.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PaymentSuccessBanner = registerClientReference(\n    function() { throw new Error(\"Attempted to call PaymentSuccessBanner() from the server but PaymentSuccessBanner is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/PaymentSuccessBanner.tsx\",\n    \"PaymentSuccessBanner\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,uBAAuB,IAAA,wQAAuB,EACvD;IAAa,MAAM,IAAI,MAAM;AAAwP,GACrR,qDACA","ignoreList":[0]}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///E:/lyra-app-v3/src/components/ManualInvoiceGenerator.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ManualInvoiceGenerator = registerClientReference(\n    function() { throw new Error(\"Attempted to call ManualInvoiceGenerator() from the server but ManualInvoiceGenerator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ManualInvoiceGenerator.tsx <module evaluation>\",\n    \"ManualInvoiceGenerator\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,yBAAyB,IAAA,wQAAuB,EACzD;IAAa,MAAM,IAAI,MAAM;AAA4P,GACzR,2EACA","ignoreList":[0]}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///E:/lyra-app-v3/src/components/ManualInvoiceGenerator.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const ManualInvoiceGenerator = registerClientReference(\n    function() { throw new Error(\"Attempted to call ManualInvoiceGenerator() from the server but ManualInvoiceGenerator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ManualInvoiceGenerator.tsx\",\n    \"ManualInvoiceGenerator\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,yBAAyB,IAAA,wQAAuB,EACzD;IAAa,MAAM,IAAI,MAAM;AAA4P,GACzR,uDACA","ignoreList":[0]}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///E:/lyra-app-v3/src/app/admin/billing/page.tsx"],"sourcesContent":["import { redirect } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { createClient } from '@/lib/supabase/server';\r\nimport { createClient as createServiceClient } from '@supabase/supabase-js';\r\nimport { \r\n  ArrowLeft, \r\n  IndianRupee, \r\n  FileText, \r\n  Clock, \r\n  CheckCircle2,\r\n  AlertCircle,\r\n  Send,\r\n  Download,\r\n  Plus\r\n} from 'lucide-react';\r\nimport { GenerateMonthlyInvoicesButton } from '@/components/GenerateMonthlyInvoicesButton';\r\nimport { SendInvoiceEmailButton } from '@/components/SendInvoiceEmailButton';\r\nimport { RecordPaymentButton } from '@/components/RecordPaymentButton';\r\nimport { PaymentSuccessBanner } from '@/components/PaymentSuccessBanner';\r\nimport { ManualInvoiceGenerator } from '@/components/ManualInvoiceGenerator';\r\nimport { DeleteInvoiceButton } from '@/components/DeleteInvoiceButton';\r\n\r\nexport default async function OrganizationBillingPage({\r\n  searchParams\r\n}: {\r\n  searchParams: Promise<{ payment?: string }>\r\n}) {\r\n  const params = await searchParams;\r\n  const supabase = await createClient();\r\n  \r\n  const { data: { user } } = await supabase.auth.getUser();\r\n  if (!user) redirect('/login');\r\n\r\n  const serviceSupabase = createServiceClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.SUPABASE_SERVICE_ROLE_KEY!\r\n  );\r\n\r\n  const { data: profile } = await serviceSupabase\r\n    .from('profiles')\r\n    .select('role')\r\n    .eq('id', user.id)\r\n    .single();\r\n\r\n  if (profile?.role !== 'admin') {\r\n    redirect('/customer/dashboard');\r\n  }\r\n\r\n  // Fetch all invoices with organization details\r\n  const { data: invoices } = await serviceSupabase\r\n    .from('organization_invoices')\r\n    .select(`\r\n      *,\r\n      organizations (\r\n        id,\r\n        name,\r\n        contact_email\r\n      )\r\n    `)\r\n    .order('created_at', { ascending: false });\r\n\r\n  // Calculate summary statistics\r\n  const totalPending = invoices?.filter(inv => inv.status === 'pending').reduce((sum, inv) => sum + inv.amount_due_paisa, 0) || 0;\r\n  const totalPaid = invoices?.filter(inv => inv.status === 'paid').reduce((sum, inv) => sum + inv.total_amount_paisa, 0) || 0;\r\n  const totalOverdue = invoices?.filter(inv => inv.status === 'overdue').reduce((sum, inv) => sum + inv.amount_due_paisa, 0) || 0;\r\n  const pendingCount = invoices?.filter(inv => inv.status === 'pending' || inv.status === 'overdue').length || 0;\r\n\r\n  // Group invoices by organization\r\n  const organizationInvoices = invoices?.reduce((acc, invoice) => {\r\n    const orgId = invoice.organization_id;\r\n    if (!acc[orgId]) {\r\n      acc[orgId] = {\r\n        organization: invoice.organizations,\r\n        invoices: [],\r\n        totalCollected: 0,\r\n        totalPending: 0,\r\n        totalOverdue: 0,\r\n        oldestUnpaidDueDate: null as Date | null\r\n      };\r\n    }\r\n    acc[orgId].invoices.push(invoice);\r\n    \r\n    if (invoice.status === 'paid') {\r\n      acc[orgId].totalCollected += invoice.total_amount_paisa;\r\n    } else if (invoice.status === 'pending') {\r\n      acc[orgId].totalPending += invoice.amount_due_paisa;\r\n      const invoiceDate = new Date(invoice.period_end);\r\n      if (!acc[orgId].oldestUnpaidDueDate || invoiceDate < acc[orgId].oldestUnpaidDueDate) {\r\n        acc[orgId].oldestUnpaidDueDate = invoiceDate;\r\n      }\r\n    } else if (invoice.status === 'overdue') {\r\n      acc[orgId].totalOverdue += invoice.amount_due_paisa;\r\n      const invoiceDate = new Date(invoice.period_end);\r\n      if (!acc[orgId].oldestUnpaidDueDate || invoiceDate < acc[orgId].oldestUnpaidDueDate) {\r\n        acc[orgId].oldestUnpaidDueDate = invoiceDate;\r\n      }\r\n    }\r\n    \r\n    return acc;\r\n  }, {} as Record<string, any>) || {};\r\n\r\n  const organizationSummaries = Object.values(organizationInvoices);\r\n\r\n  // Get all organizations and calculate coin payment data\r\n  const { data: organizations } = await serviceSupabase\r\n    .from('organizations')\r\n    .select('id, name, contact_email');\r\n\r\n  // Calculate current month and last month periods\r\n  const now = new Date();\r\n  const thisMonthStart = new Date(now.getFullYear(), now.getMonth(), 1);\r\n  const nextMonthStart = new Date(now.getFullYear(), now.getMonth() + 1, 1);\r\n  const lastMonthStart = new Date(now.getFullYear(), now.getMonth() - 1, 1);\r\n\r\n  // Get coin payment data for each organization\r\n  const orgCoinData = await Promise.all(\r\n    (organizations || []).map(async (org) => {\r\n      // Get organization's user profiles\r\n      const { data: orgProfiles } = await serviceSupabase\r\n        .from('profiles')\r\n        .select('id')\r\n        .eq('organization_id', org.id);\r\n\r\n      const userIds = orgProfiles?.map(p => p.id) || [];\r\n\r\n      if (userIds.length === 0) {\r\n        return {\r\n          ...org,\r\n          thisMonthTotal: 0,\r\n          thisMonthCount: 0,\r\n          lastMonthTotal: 0,\r\n          lastMonthCount: 0,\r\n          machineCount: 0\r\n        };\r\n      }\r\n\r\n      // Get machines for this organization\r\n      const { data: orgMachines } = await serviceSupabase\r\n        .from('vending_machines')\r\n        .select('id')\r\n        .in('customer_id', userIds);\r\n\r\n      const machineIds = orgMachines?.map(m => m.id) || [];\r\n\r\n      if (machineIds.length === 0) {\r\n        return {\r\n          ...org,\r\n          thisMonthTotal: 0,\r\n          thisMonthCount: 0,\r\n          lastMonthTotal: 0,\r\n          lastMonthCount: 0,\r\n          machineCount: 0\r\n        };\r\n      }\r\n\r\n      // This month coin payments\r\n      const { data: thisMonthPayments } = await serviceSupabase\r\n        .from('coin_payments')\r\n        .select('amount_in_paisa')\r\n        .in('machine_id', machineIds)\r\n        .gte('created_at', thisMonthStart.toISOString())\r\n        .lt('created_at', nextMonthStart.toISOString())\r\n        .eq('dispensed', true);\r\n\r\n      const thisMonthTotal = thisMonthPayments?.reduce((sum, p) => sum + (p.amount_in_paisa || 0), 0) || 0;\r\n      const thisMonthCount = thisMonthPayments?.length || 0;\r\n\r\n      // Last month coin payments\r\n      const { data: lastMonthPayments } = await serviceSupabase\r\n        .from('coin_payments')\r\n        .select('amount_in_paisa')\r\n        .in('machine_id', machineIds)\r\n        .gte('created_at', lastMonthStart.toISOString())\r\n        .lt('created_at', thisMonthStart.toISOString())\r\n        .eq('dispensed', true);\r\n\r\n      const lastMonthTotal = lastMonthPayments?.reduce((sum, p) => sum + (p.amount_in_paisa || 0), 0) || 0;\r\n      const lastMonthCount = lastMonthPayments?.length || 0;\r\n\r\n      return {\r\n        ...org,\r\n        thisMonthTotal,\r\n        thisMonthCount,\r\n        lastMonthTotal,\r\n        lastMonthCount,\r\n        machineCount: machineIds.length\r\n      };\r\n    })\r\n  );\r\n\r\n  const totalThisMonthCoin = orgCoinData.reduce((sum, org) => sum + org.thisMonthTotal, 0);\r\n  const totalLastMonthCoin = orgCoinData.reduce((sum, org) => sum + org.lastMonthTotal, 0);\r\n\r\n  const formatCurrency = (paisa: number) => {\r\n    return `â‚¹${(paisa / 100).toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;\r\n  };\r\n\r\n  const formatDate = (date: string) => {\r\n    return new Date(date).toLocaleDateString('en-IN', {\r\n      day: '2-digit',\r\n      month: 'short',\r\n      year: 'numeric'\r\n    });\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const styles: Record<string, string> = {\r\n      draft: 'bg-gray-100 text-gray-700',\r\n      pending: 'bg-yellow-100 text-yellow-700',\r\n      paid: 'bg-green-100 text-green-700',\r\n      overdue: 'bg-red-100 text-red-700',\r\n      cancelled: 'bg-gray-100 text-gray-500'\r\n    };\r\n    return styles[status] || styles.draft;\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {params.payment === 'success' && <PaymentSuccessBanner />}\r\n      \r\n      <header className=\"bg-white border-b\">\r\n        <div className=\"px-6 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <Link href=\"/admin/dashboard\" className=\"p-2 hover:bg-gray-100 rounded-lg\">\r\n                <ArrowLeft className=\"h-5 w-5\" />\r\n              </Link>\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Organization Billing</h1>\r\n                <p className=\"text-sm text-gray-500\">Manage coin payment invoices and collections</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <ManualInvoiceGenerator />\r\n              <GenerateMonthlyInvoicesButton />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"p-6 max-w-7xl mx-auto\">\r\n        {/* Summary Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6\">\r\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border border-gray-200\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div className=\"p-3 bg-yellow-100 rounded-lg\">\r\n                <Clock className=\"h-6 w-6 text-yellow-600\" />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-600 mb-1\">Pending Amount</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">{formatCurrency(totalPending)}</p>\r\n              <p className=\"text-xs text-gray-500 mt-1\">{pendingCount} invoice(s)</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border border-gray-200\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div className=\"p-3 bg-green-100 rounded-lg\">\r\n                <CheckCircle2 className=\"h-6 w-6 text-green-600\" />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-600 mb-1\">Collected (Paid)</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">{formatCurrency(totalPaid)}</p>\r\n              <p className=\"text-xs text-gray-500 mt-1\">All time</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border border-gray-200\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div className=\"p-3 bg-red-100 rounded-lg\">\r\n                <AlertCircle className=\"h-6 w-6 text-red-600\" />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-600 mb-1\">Overdue</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">{formatCurrency(totalOverdue)}</p>\r\n              <p className=\"text-xs text-gray-500 mt-1\">Needs follow-up</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-xl shadow-sm p-6 border border-gray-200\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div className=\"p-3 bg-blue-100 rounded-lg\">\r\n                <FileText className=\"h-6 w-6 text-blue-600\" />\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm text-gray-600 mb-1\">Total Invoices</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">{invoices?.length || 0}</p>\r\n              <p className=\"text-xs text-gray-500 mt-1\">All statuses</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Organization-wise Summary */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 mb-6\">\r\n          <div className=\"px-6 py-4 border-b border-gray-200\">\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">Organization-wise Billing Summary</h2>\r\n            <p className=\"text-sm text-gray-500\">Payment status and outstanding dues by organization</p>\r\n          </div>\r\n\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Organization\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Total Invoices\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Collected (Paid)\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Pending Payment\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Overdue Amount\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Oldest Due Date\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Actions\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {organizationSummaries.length > 0 ? (\r\n                  organizationSummaries.map((orgSummary: any) => {\r\n                    const hasUnpaid = orgSummary.totalPending > 0 || orgSummary.totalOverdue > 0;\r\n                    const daysOverdue = orgSummary.oldestUnpaidDueDate \r\n                      ? Math.floor((new Date().getTime() - new Date(orgSummary.oldestUnpaidDueDate).getTime()) / (1000 * 60 * 60 * 24))\r\n                      : 0;\r\n                    \r\n                    return (\r\n                      <tr key={orgSummary.organization.id} className={`hover:bg-gray-50 ${hasUnpaid ? 'bg-yellow-50' : ''}`}>\r\n                        <td className=\"px-6 py-4\">\r\n                          <div className=\"text-sm font-medium text-gray-900\">{orgSummary.organization.name}</div>\r\n                          <div className=\"text-xs text-gray-500\">{orgSummary.organization.contact_email}</div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 text-center text-sm text-gray-900\">\r\n                          {orgSummary.invoices.length}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 text-right text-sm font-medium text-green-600\">\r\n                          {formatCurrency(orgSummary.totalCollected)}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 text-right text-sm font-medium text-yellow-600\">\r\n                          {formatCurrency(orgSummary.totalPending)}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 text-right text-sm font-medium text-red-600\">\r\n                          {formatCurrency(orgSummary.totalOverdue)}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 text-center text-sm\">\r\n                          {orgSummary.oldestUnpaidDueDate ? (\r\n                            <div>\r\n                              <div className={`font-medium ${daysOverdue > 30 ? 'text-red-600' : daysOverdue > 15 ? 'text-orange-600' : 'text-gray-900'}`}>\r\n                                {formatDate(orgSummary.oldestUnpaidDueDate.toISOString())}\r\n                              </div>\r\n                              {daysOverdue > 0 && (\r\n                                <div className=\"text-xs text-red-600\">\r\n                                  {daysOverdue} days overdue\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          ) : (\r\n                            <span className=\"text-gray-400\">-</span>\r\n                          )}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 text-center\">\r\n                          <div className=\"flex items-center justify-center gap-2\">\r\n                            <Link\r\n                              href={`#org-${orgSummary.organization.id}`}\r\n                              className=\"text-blue-600 hover:text-blue-800 text-xs font-medium\"\r\n                            >\r\n                              View Invoices\r\n                            </Link>\r\n                            {hasUnpaid && (\r\n                              <button\r\n                                className=\"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700\"\r\n                              >\r\n                                Send Reminder\r\n                              </button>\r\n                            )}\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })\r\n                ) : (\r\n                  <tr>\r\n                    <td colSpan={7} className=\"px-6 py-8 text-center text-gray-500\">\r\n                      No organizations with invoices yet\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n              <tfoot className=\"bg-gray-50 border-t-2 border-gray-300\">\r\n                <tr>\r\n                  <td colSpan={2} className=\"px-6 py-4 text-sm font-bold text-gray-900\">\r\n                    Total\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-right text-sm font-bold text-green-600\">\r\n                    {formatCurrency(totalPaid)}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-right text-sm font-bold text-yellow-600\">\r\n                    {formatCurrency(totalPending)}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-right text-sm font-bold text-red-600\">\r\n                    {formatCurrency(totalOverdue)}\r\n                  </td>\r\n                  <td colSpan={2}></td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Organization Coin Payment Data */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 mb-6\">\r\n          <div className=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-lg font-semibold text-gray-900\">Coin Payment Overview</h2>\r\n              <p className=\"text-sm text-gray-500\">Organization-wise coin payment breakdown</p>\r\n            </div>\r\n            <div className=\"flex gap-4 text-sm\">\r\n              <div className=\"text-right\">\r\n                <p className=\"text-gray-500\">This Month</p>\r\n                <p className=\"font-semibold text-blue-600\">{formatCurrency(totalThisMonthCoin)}</p>\r\n              </div>\r\n              <div className=\"text-right\">\r\n                <p className=\"text-gray-500\">Last Month (Billable)</p>\r\n                <p className=\"font-semibold text-green-600\">{formatCurrency(totalLastMonthCoin)}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Organization\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Machines\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Last Month Txns\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Last Month Amount\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    This Month Txns\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    This Month Amount\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {orgCoinData.map((org) => (\r\n                  <tr key={org.id} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4\">\r\n                      <div className=\"text-sm font-medium text-gray-900\">{org.name}</div>\r\n                      <div className=\"text-xs text-gray-500\">{org.contact_email}</div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-center text-sm text-gray-900\">\r\n                      {org.machineCount}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-right text-sm text-gray-600\">\r\n                      {org.lastMonthCount}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-right text-sm font-medium text-green-600\">\r\n                      {formatCurrency(org.lastMonthTotal)}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-right text-sm text-gray-600\">\r\n                      {org.thisMonthCount}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 text-right text-sm font-medium text-blue-600\">\r\n                      {formatCurrency(org.thisMonthTotal)}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n              <tfoot className=\"bg-gray-50 border-t-2 border-gray-300\">\r\n                <tr>\r\n                  <td colSpan={3} className=\"px-6 py-4 text-sm font-bold text-gray-900\">\r\n                    Total\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-right text-sm font-bold text-green-600\">\r\n                    {formatCurrency(totalLastMonthCoin)}\r\n                  </td>\r\n                  <td className=\"px-6 py-4\"></td>\r\n                  <td className=\"px-6 py-4 text-right text-sm font-bold text-blue-600\">\r\n                    {formatCurrency(totalThisMonthCoin)}\r\n                  </td>\r\n                </tr>\r\n              </tfoot>\r\n            </table>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Invoices Table */}\r\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-200\">\r\n          <div className=\"px-6 py-4 border-b border-gray-200\">\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">All Invoices</h2>\r\n          </div>\r\n\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full\">\r\n              <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Invoice #\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Organization\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Period\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Transactions\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Total Amount\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Paid\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Due\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Status\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Actions\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {invoices && invoices.length > 0 ? (\r\n                  invoices.map((invoice: any) => (\r\n                    <tr key={invoice.id} className=\"hover:bg-gray-50\">\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"flex items-center\">\r\n                          <FileText className=\"h-4 w-4 text-gray-400 mr-2\" />\r\n                          <span className=\"text-sm font-medium text-gray-900\">{invoice.invoice_number}</span>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-900\">{invoice.organizations?.name}</div>\r\n                        <div className=\"text-xs text-gray-500\">{invoice.organizations?.contact_email}</div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-900\">\r\n                          {formatDate(invoice.period_start)}\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-500\">\r\n                          to {formatDate(invoice.period_end)}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900\">\r\n                        {invoice.total_coin_transactions}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900\">\r\n                        {formatCurrency(invoice.total_amount_paisa)}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm text-green-600\">\r\n                        {formatCurrency(invoice.amount_paid_paisa)}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-red-600\">\r\n                        {formatCurrency(invoice.amount_due_paisa)}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-center\">\r\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusBadge(invoice.status)}`}>\r\n                          {invoice.status}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-center\">\r\n                        <div className=\"flex items-center justify-center gap-2\">\r\n                          {invoice.status !== 'paid' && invoice.amount_due_paisa > 0 && (\r\n                            <>\r\n                              <Link\r\n                                href={`/admin/billing/${invoice.id}/pay`}\r\n                                className=\"inline-flex items-center px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700\"\r\n                              >\r\n                                Pay Now\r\n                              </Link>\r\n                              <SendInvoiceEmailButton invoiceId={invoice.id} />\r\n                              <RecordPaymentButton \r\n                                invoiceId={invoice.id}\r\n                                amountDue={invoice.amount_due_paisa}\r\n                                organizationName={invoice.organizations?.name}\r\n                              />\r\n                            </>\r\n                          )}\r\n                          <Link\r\n                            href={`/admin/billing/${invoice.id}`}\r\n                            className=\"text-blue-600 hover:text-blue-900 text-sm font-medium\"\r\n                          >\r\n                            View\r\n                          </Link>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n                ) : (\r\n                  <tr>\r\n                    <td colSpan={9} className=\"px-6 py-12 text-center text-gray-500\">\r\n                      <FileText className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\r\n                      <p className=\"text-lg font-medium mb-2\">No invoices yet</p>\r\n                      <p className=\"text-sm\">Generate monthly invoices to start tracking organization payments</p>\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}